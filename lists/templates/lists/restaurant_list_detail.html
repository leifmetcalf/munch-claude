{% extends 'base.html' %}

{% block title %}{{ restaurant_list.name }} - Munch{% endblock %}

{% block content %}
<h1>{{ restaurant_list.name }}</h1>

<div>
    <p><strong>Owner:</strong> {{ restaurant_list.owner.username }}</p>
    <p><strong>Created:</strong> {{ restaurant_list.inserted_at|date:"F j, Y" }}</p>
</div>

<div style="margin: 20px 0;">
    <a href="{% url 'restaurantlistitem_create' restaurant_list.id %}">Add Restaurant to List</a>
</div>

{% if list_items %}
    <h2>Restaurants in this list</h2>
    <div>
        {% for item in list_items %}
            <div style="border: 1px solid #ccc; margin: 10px 0; padding: 10px;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <div style="flex: 1;">
                        <h3><a href="{% url 'restaurant_detail' item.restaurant.id %}">{{ item.restaurant.name }}</a></h3>
                        <p>{{ item.restaurant.address }}</p>
                        <p><strong>Added:</strong> {{ item.inserted_at|date:"F j, Y" }}</p>
                        {% if item.notes %}
                            <p><strong>Notes:</strong> {{ item.notes }}</p>
                        {% endif %}
                    </div>
                    {% if user.is_authenticated and user == restaurant_list.owner %}
                        <div style="display: flex; flex-direction: column; gap: 5px;">
                            <a href="{% url 'move_item_up' item.id %}" style="padding: 5px 10px; background: #007bff; color: white; text-decoration: none; border-radius: 3px; text-align: center;">â†‘</a>
                            <a href="{% url 'move_item_down' item.id %}" style="padding: 5px 10px; background: #007bff; color: white; text-decoration: none; border-radius: 3px; text-align: center;">â†“</a>
                        </div>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>No restaurants in this list yet. <a href="{% url 'restaurantlistitem_create' restaurant_list.id %}">Add one!</a></p>
{% endif %}

<div style="margin-top: 20px;">
    <a href="{% url 'restaurantlist_index' %}">Back to Lists</a>
</div>
{% endblock %}