{% extends 'base.html' %}

{% block title %}{{ restaurant.name }} - Munch{% endblock %}

{% block content %}
<h1>{{ restaurant.name }}</h1>

<div>
    <h2>Restaurant Details</h2>
    <p><strong>Address:</strong> {{ restaurant.address }}</p>
    <p><strong>Suburb:</strong> {{ restaurant.suburb|default:"N/A" }}</p>
    <p><strong>Region:</strong> {{ restaurant.region|default:"N/A" }}</p>
    <p><strong>Country:</strong> {{ restaurant.country|default:"N/A" }}</p>
</div>

{% if coordinates %}
<div style="margin-top: 20px;">
    <h2>Location</h2>
    <div id="map" style="height: 400px; width: 100%; border: 1px solid #ccc;"></div>
</div>
{% endif %}

<div style="margin-top: 20px;">
    <a href="{% url 'restaurant_index' %}">All Restaurants</a>
    <a href="{% url 'restaurant_nominatim' %}">Back to Search</a>
</div>

{% if coordinates %}
<script>
    // Initialize the map
    var map = L.map('map').setView([{{ coordinates.lat }}, {{ coordinates.lng }}], 15);
    
    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    
    // Add a marker for the restaurant
    var marker = L.marker([{{ coordinates.lat }}, {{ coordinates.lng }}]).addTo(map);
    marker.bindPopup('<b>{{ restaurant.name|escapejs }}</b><br>{{ restaurant.address|escapejs }}');
</script>
{% endif %}
{% endblock %}